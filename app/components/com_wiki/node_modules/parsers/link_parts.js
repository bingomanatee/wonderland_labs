var _ = require('underscore');

module.exports = function (links, article) {

    return _.compact(_.map(links, function (link) {
        var e = link.match(/\[\[([^:\]]+)(:([^\]]+))?\]\]/);
        if (!e) return false;
        return {name:e[1], original:link, scope: article ? article.scope : '', label:e[3] ? e[3] : e[1].replace(/_/g, ' ')};
    }));
}