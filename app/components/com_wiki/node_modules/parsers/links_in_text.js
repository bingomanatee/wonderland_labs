var _ = require('underscore');

/*
 * Finds wiki links in an article and returns them as an array of component parts.
 * note- scope is not returned - its not a required part of the link syntax.
 */

module.exports = function (text) {
    var hits = text.match(/\[\[([^\]]+)\]\]/g);

    if (hits && hits.length) {
        return _.map(hits, function (link) {
            var e = link.match(/\[\[([^:\]]+)(:([^\]]+))?\]\]/);
            if (!e) return false;
            return {name:e[1], original:link, label:e[3] ? e[3] : e[1].replace(/_/g, ' ')};
        })
    } else {
        return [];
    }

}